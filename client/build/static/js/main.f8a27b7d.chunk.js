(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{50:function(e,t,a){},51:function(e,t,a){},80:function(e,t,a){"use strict";a.r(t);var s=a(0),c=a.n(s),n=a(16),r=a.n(n),l=(a(50),a(8)),o=(a(51),a(6)),i=a(10),j=a.n(i),d=a(84),b=a(86),u=a(1);var h=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(""),r=Object(o.a)(n,2),l=r[0],i=r[1],h=Object(s.useState)(""),O=Object(o.a)(h,2),m=O[0],x=O[1];return Object(u.jsxs)("div",{className:"std_div",children:[Object(u.jsx)("h3",{className:"mb-4",children:"Login"}),Object(u.jsxs)(d.a,{onSubmit:function(e){e.preventDefault(),j.a.post("/auth/login",{email:a,password:l}).then((function(e){return e.data})).then((function(e){localStorage.setItem("token",e.data.token),localStorage.setItem("user",JSON.stringify(e.data.user)),window.location="/posts"})).catch((function(e){return x(e.response.data.message)}))},children:[Object(u.jsxs)(d.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(u.jsx)(d.a.Label,{children:"Email address"}),Object(u.jsx)(d.a.Control,{onChange:function(e){c(e.target.value)},type:"email",placeholder:"Enter email"}),Object(u.jsx)(d.a.Text,{className:"text-muted"})]}),Object(u.jsxs)(d.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(u.jsx)(d.a.Label,{children:"Password"}),Object(u.jsx)(d.a.Control,{onChange:function(e){i(e.target.value)},type:"password",placeholder:"Password"})]}),Object(u.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"})]}),m&&Object(u.jsx)("div",{class:"alert alert-danger mt-2",children:m})]})},O=(a(73),a(83)),m=a(82),x=a(19);var p=function(){return Object(u.jsx)("header",{children:Object(u.jsx)(O.a,{children:Object(u.jsxs)(m.a,{children:[Object(u.jsx)(O.a.Brand,{href:"#home",children:"SB Posts"}),Object(u.jsx)(O.a.Toggle,{}),localStorage.getItem("token")&&Object(u.jsxs)(O.a.Collapse,{className:"justify-content-end",children:[Object(u.jsx)(O.a.Brand,{className:"mr-2",children:Object(u.jsx)("h3",{children:JSON.parse(localStorage.getItem("user")).name})}),Object(u.jsx)(O.a.Brand,{className:"mr-2",children:Object(u.jsx)(x.b,{to:"/posts/create",className:"btn btn-success",children:"Add Post"})}),Object(u.jsx)(O.a.Text,{children:Object(u.jsx)(b.a,{onClick:function(){j.a.delete("/auth/logout").then((function(e){localStorage.clear(),window.location="/login"}))},className:"btn btn-danger",children:"Logout"})})]}),!localStorage.getItem("token")&&Object(u.jsx)(O.a.Text,{children:Object(u.jsx)(x.b,{to:"/signup",className:"btn btn-success text-white",children:"Signup"})})]})})})},g=a(85);var f=function(e){var t=e.post;return Object(u.jsxs)(g.a,{className:"shadow mb-4 bg-white rounded",children:[Object(u.jsxs)(g.a.Header,{children:["# ",t.id]}),Object(u.jsx)(g.a.Body,{children:Object(u.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(u.jsx)("p",{children:Object(u.jsx)("small",{children:t.content})}),Object(u.jsx)("footer",{className:"blockquote-footer",style:{textAlign:"right"},children:t.user.name})]})})]})};var v=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(s.useEffect)((function(){j.a.get("/posts").then((function(e){return e.data})).then((function(e){c(e.data.posts)}))}),[]),Object(u.jsxs)("div",{children:[a.map((function(e){return Object(u.jsx)(f,{post:e})})),!a.length&&Object(u.jsx)("h4",{className:"p-5",children:"Please follow some users to see their posts "})]})};var N=function(e){var t=e.user;return Object(u.jsxs)("div",{className:"user",children:[Object(u.jsx)("h3",{children:t.name}),Object(u.jsx)("button",{onClick:function(){return e=t.id,void j.a.post("/users/".concat(e,"/follow"),{}).then((function(e){return window.location.reload()}));var e},className:"btn btn-info text-white",children:"Follow"}),Object(u.jsxs)("small",{className:"mx-2",children:[t.follower_count," Followers"]})]})};var S=function(){var e=Object(s.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1];return Object(s.useEffect)((function(){j.a.get("/users?page=1&limit=4").then((function(e){return e.data})).then((function(e){return c(e.data.users)}))}),[]),Object(u.jsxs)("div",{className:"user-container",children:[a.map((function(e){return Object(u.jsx)(N,{user:e})})),!a.length&&Object(u.jsx)("h4",{children:"No unfollowed users found !!"})]})};var w=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(""),r=Object(o.a)(n,2),l=r[0],i=r[1],h=Object(s.useState)(""),O=Object(o.a)(h,2),m=O[0],x=O[1],p=Object(s.useState)(""),g=Object(o.a)(p,2),f=g[0],v=g[1];return Object(u.jsxs)("div",{className:"std_div",children:[Object(u.jsx)("h3",{children:"Signup"}),Object(u.jsxs)(d.a,{onSubmit:function(e){e.preventDefault(),j.a.post("/auth/signup",{name:f,email:a,password:l}).then((function(e){return window.location="/login"})).catch((function(e){return x(e.response.data.message)}))},children:[Object(u.jsxs)(d.a.Group,{className:"mb-3",children:[Object(u.jsx)(d.a.Label,{children:"Full Name"}),Object(u.jsx)(d.a.Control,{onChange:function(e){v(e.target.value)},type:"text",placeholder:"Enter Full Name"}),Object(u.jsx)(d.a.Text,{className:"text-muted"})]}),Object(u.jsxs)(d.a.Group,{className:"mb-3",children:[Object(u.jsx)(d.a.Label,{children:"Email address"}),Object(u.jsx)(d.a.Control,{onChange:function(e){c(e.target.value)},type:"email",placeholder:"Enter email"}),Object(u.jsx)(d.a.Text,{className:"text-muted"})]}),Object(u.jsxs)(d.a.Group,{className:"mb-3",children:[Object(u.jsx)(d.a.Label,{children:"Password"}),Object(u.jsx)(d.a.Control,{onChange:function(e){i(e.target.value)},type:"password",placeholder:"Password"})]}),Object(u.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"})]}),m&&Object(u.jsx)("div",{class:"alert alert-danger mt-2",children:m})]})};var C=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],n=Object(s.useState)(""),r=Object(o.a)(n,2),l=r[0],i=r[1];return Object(u.jsxs)("div",{className:"std_div",children:[Object(u.jsx)("h3",{children:"Add a new post"}),Object(u.jsxs)(d.a,{onSubmit:function(e){e.preventDefault(),j.a.post("/posts",{content:a}).then((function(e){return window.location="/posts"})).catch((function(e){return i(e.response.data.message)}))},children:[Object(u.jsxs)(d.a.Group,{className:"mb-3",children:[Object(u.jsx)(d.a.Label,{children:"Enter Content"}),Object(u.jsx)(d.a.Control,{onChange:function(e){c(e.target.value)},as:"textarea",rows:3}),Object(u.jsx)(d.a.Text,{className:"text-muted"})]}),Object(u.jsx)(b.a,{variant:"primary",type:"submit",children:"Submit"})]}),l&&Object(u.jsx)("div",{class:"alert alert-danger mt-2",children:l})]})};var y=function(){return Object(u.jsx)("div",{className:"App",children:Object(u.jsxs)("div",{className:"header",children:[Object(u.jsx)(p,{className:"col-6"}),Object(u.jsx)(l.a,{path:"/signup",children:Object(u.jsx)(w,{})}),!localStorage.getItem("token")&&Object(u.jsx)(l.a,{path:"/login",children:Object(u.jsx)(h,{})}),localStorage.getItem("token")&&Object(u.jsx)(l.a,{path:"/posts/create",children:Object(u.jsx)(C,{})}),localStorage.getItem("token")&&Object(u.jsxs)(l.a,{exact:!0,path:"/posts",children:[Object(u.jsx)("div",{className:"posts",children:Object(u.jsx)(v,{})}),Object(u.jsx)("div",{className:"users",children:Object(u.jsx)(S,{})})]})]})})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,87)).then((function(t){var a=t.getCLS,s=t.getFID,c=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),s(e),c(e),n(e),r(e)}))};j.a.interceptors.request.use((function(e){return e.url="http://3.143.37.165/sb-posts/server/api"+e.url,e.headers={Authorization:"Bearer "+localStorage.getItem("token")},e})),r.a.render(Object(u.jsx)(x.a,{basename:"/sb-posts/client/build",children:Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(y,{})})}),document.getElementById("root")),k()}},[[80,1,2]]]);
//# sourceMappingURL=main.f8a27b7d.chunk.js.map